<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started :: ACS Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/acs-workshop/acs-workshop/02-getting_started.html">
    <link rel="prev" href="01-setup.html">
    <link rel="next" href="03-overview-acs.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://redhat-scholars.github.io/acs-workshop">ACS Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="acs-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">ACS Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisite">Prerequisites</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-getting_started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#rhacs_components">RHACS Components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#install_acs_operator">Install RHACS Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#install_acs_central">Install RHACS Central Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#config_acs_securedcluster">Configuration of the RHACS Secured Cluster </a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#deploy_acs_manually">Deploying ACS manually</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#deploy_demo_acs">Deploying Demo in RHACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#deploy_apps">Deploying Apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-overview-acs.html">RHACS Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-overview-acs.html#acs_architecture">RHACS Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-overview-acs.html#dashboard_acs">RHACS Dashboard</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-overview-acs.html#dashboard_acs_header">Dashboard Header</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-overview-acs.html#dashboard_acs_menu">Dashboard Left Menu</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-overview-acs.html#dashboard_acs_information">Dashboard Information</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-vulnerabilities.html">Vulnerability Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-vulnerabilities.html#image_overview_image_details">Image overview and image details</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-vulnerabilities.html#vulnerability_management_panel">Review Vulnerability Management Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-vulnerabilities.html#scanning_images">Scanning images for vulnerabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-vulnerabilities.html#filtering_vulnerabilities_scans">Filtering vulnerabilities scans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-vulnerabilities.html#review_cve_images">Image CVE Vulnerability Analysis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-vulnerabilities.html#image_correlation_deployments">Image CVE correlation with Deployments</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05-risk.html">Risk Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-risk.html#risk_dashboard">Review Risk Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-risk.html#risk_single_deployment_details">Single Deployment Details</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-risk.html#risk_process_discovery">Process Discovery / Runtime</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-risk.html#risk_filtering">Filtering</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-network_graph.html">Network Graph</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-network_graph.html#network_graph_overview">Network Graph Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-network_graph.html#network_graph_views">Network Graph Views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-network_graph.html#network_policy_simulator">Network Policy Simulator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-network_graph-2.0.html">Network Graph 2.0</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-network_graph-2.0.html#network_graph_overview-2">Network Graph Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-network_graph-2.0.html#network_graph_views-2">Network Graph Views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-network_graph-2.0.html#network_policy_simulator-2">Network Policy Simulator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="07-violations.html">Violations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07-violations.html#violations_overview">Violations Dashboard Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07-violations.html#violations_example">Violations Build &amp; Deploy Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07-violations.html#violations_runtime">Violations Runtime Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07-violations.html#violations_behaviour">Violations Behaviour</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07-violations.html#policy_summary">Policy Summary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="08-compliance.html">Compliance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_dashboard">Review Compliance Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_dashboard_scan">Execute the first Compliance Scan</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_dashboard_review">Review the Compliance Reports in the Compliance Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_dashboard_ns">Namespace Compliance Details</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_dashboard_report">Evidence Export</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_operator">Integrating Compliance Operator with RHACS </a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#compliance_operator_acs_review">Review Compliance Scans of the Compliance Operator in RHACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#acs_policy_compliance">Configure Policy in RHACS to Invoke Compliance related Controls</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#acs_policy_compliance_nist">Enforce Policies that Meet Guidance for NIST Control 4.2.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#acs_policy_compliance_nist_view">View Updated Compliance Scan Results in RHACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="08-compliance.html#acs_policy_compliance_nist_revert">Revert the Policy Changes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="09-configuration_management.html">Configuration Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="09-configuration_management.html#conf_management_overview">Configuration Management Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="09-configuration_management.html#conf_management_cis">Configuration Management CIS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="10-system_policies.html">System Policies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10-system_policies.html#system_policies_overview">System Policies Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10-system_policies.html#system_policies_example">System Policies Build and Deploy Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10-system_policies.html#system_policies_enforcement">System Policies Enforcement</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="11-integrations.html">RHACS Integrations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="11-integrations.html#integrate_with_internal_openshift_registry">Integrate with Internal Openshift Registry</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="11-integrations.html#integrate_with_internal_openshift_registry_config_acs">Configure RHACS integration for Internal Openshift Registry</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-integrations.html#integrate_acs_slack">Integrate RHACS with Slack</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-integrations.html#integrate_acs_oauth">Integrate RHACS with OpenShift OAuth</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-integrations.html#integrate_acs_sso">Integrate RHACS with OpenShift RHSSO</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="12-platform_configuration.html">RHACS Secure Cluster Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-platform_configuration.html#clusters">RHACS Secured Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-platform_configuration.html#clusters_vuln">Add vulnerabilities to the Secured Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-platform_configuration.html#system_configuration">RHACS System Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-platform_configuration.html#system_health">RHACS System Health</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-platform_configuration.html#access_control">RHACS Access Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="13-cicd.html">DevSecOps Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-cicd.html#install_devsecops_pipelines">Installing RHACS DevSecOps Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-cicd.html#run_devsecops_pipelines">Running the demo of DevSecOps Pipeline</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="14-apicli.html">RHACS API and CLI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14-apicli.html#cli-overview">RHACS CLI Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14-apicli.html#cli-integration">RHACS CLI Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14-apicli.html#api-overview">RHACS API Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="15-contributors.html">Contributors</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ACS Workshop</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">ACS Workshop</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">ACS Workshop</a></li>
    <li><a href="02-getting_started.html">Getting Started</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/acs-workshop/edit/master/documentation/modules/ROOT/pages/02-getting_started.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Getting Started</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We will install ACS thought the RHACS Operator and afterwards we will install an small demo that will serve examples to our workshop.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can request in RHPDS the environment already installed (including the demo) - Go to Multi-Product Demo &#8594; Openshift 4 Advanced Cluster Security 4
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rhacs_components"><a class="anchor" href="#rhacs_components"></a>RHACS Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Advanced Cluster Security for Kubernetes (ACS) consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Central</code> service, which exposes api and console and communicates with Sensors on secured clusters.</p>
</li>
<li>
<p>The <code>Scanner</code> service, which has the role of scanning the deployed pods images.</p>
</li>
<li>
<p>The <code>Sensor</code>, which monitors your Kubernetes and OpenShift Container Platform clusters.</p>
</li>
<li>
<p>The <code>Admision Controller</code> which prevent users from creating workloads that violate configured security policies.</p>
</li>
<li>
<p>The <code>Collector</code> which moniotrs runtime activity on each node for your secured clusters. It reports to <strong>Sensor</strong>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You should check the specific version for you RHACS version to check memory/storage requirements ACS components and the sizing guidelines as well.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install_acs_operator"><a class="anchor" href="#install_acs_operator"></a>RHACS Operator Installation</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find and the Advanced Cluster Security Operator from the Operator Hub.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/00_operator_hub.png" alt="ACS Operator 1" width="800">
</div>
</div>
</li>
<li>
<p>Install the selected operator by clicking on the <code>Install</code> button.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/01_select_acs_operator.png" alt="ACS Operator 2" width="800">
</div>
</div>
</li>
<li>
<p>Confirm default installation parameters (auto update, <code>latest channel</code>, <code>rhacs-operator</code> namespace).</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/02_install_acs_operator.png" alt="ACS Operator 3" width="800">
</div>
</div>
</li>
<li>
<p>Wait for completion, the installation will take a few seconds.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/03_wait_for_completion.png" alt="ACS Operator 4" width="800">
</div>
</div>
</li>
<li>
<p>When the installation finishes.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_operator_ready.png" alt="ACS Operator 5" width="800">
</div>
</div>
</li>
<li>
<p>Access the now ready operator by clicking on the <code>View Operator</code> button.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_operator_installed.png" alt="ACS Operator 6">
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This step is not required if you are using the Cloud Service for Red Hat Advanced Cluster Security for Kubernetes (ACS).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install_acs_central"><a class="anchor" href="#install_acs_central"></a>RHACS Central Cluster Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the operator has been installed we need to deploy the Central component. This component must be deployed in Red Hat OpenShift 4.9 or higher. However, it can be deployed in Kubernetes but you must carefully read <a href="https://access.redhat.com/node/5822721">Red Hat Advanced Cluster Security for Kubernetes Support Policy</a>.</p>
</div>
<div class="paragraph">
<p>In this section we will deploy the Central component in the lab cluster. The Central is made up two main deployments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>central</code> service, which exposes api and console and communicates with Sensors on secured clusters.</p>
</li>
<li>
<p>The <code>scanner</code> service, which has the role of scanning the deployed pods images.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_rhacs_central_requirements"><a class="anchor" href="#_rhacs_central_requirements"></a>RHACS Central requirements</h3>
<div class="paragraph">
<p>Central uses a database referred as Central DB (PostgreSQL 13) and both Central and PostgreSQL require persistent storage. SSD storage is recommended for best performance but different storage can be used as well.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Using an external database is currently a Technology Preview and will not be covered in this workshop.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RHACS requires external access to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://definitions.stackrox.io">definitions.stackrox.io</a> for downloading updated vulnerability definitions.</p>
</li>
<li>
<p><a href="https://collector-modules.stacrox.io">collector-modules.stackrox.io</a> to download updated kernel support packages.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_rhacs_central_deployment"><a class="anchor" href="#_rhacs_central_deployment"></a>RHACS Central deployment</h3>
<div class="paragraph">
<p>RHACS Central deployment can be performed in several ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#install_acs_central_web_console">Deploying Central using the ACS Operator (Web Console)</a></p>
</li>
<li>
<p><a href="#install_acs_central_oc_client">Deploying Central using the oc client (CLI)</a></p>
</li>
<li>
<p>Using roxctl (CLI)</p>
</li>
<li>
<p>Using Helm Charts</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This step is not required if you are using the Cloud Service for Red Hat Advanced Cluster Security for Kubernetes (ACS).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="install_acs_central_web_console"><a class="anchor" href="#install_acs_central_web_console"></a>Deploying Central using the ACS Operator (Web Console)</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the operator <em>ready screen</em> by clicking on <code>View Operator</code> or navigating to the <strong>Operators → Installed Operators</strong> page. Then, under the <strong>Provided APIs</strong> section, select <code>Create Central</code> on the <code>Central</code> API:</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_1_create_central_resource.png" alt="ACS Operator 51" width="800">
</div>
</div>
</li>
<li>
<p>Check the <code>YAML</code> radio button and paste the <code>Central</code> CR you see below and click on the <code>Create</code> button.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_2_create_central_resource.png" alt="ACS Operator 52" width="800">
</div>
</div>
</li>
<li>
<p>You can check the progress by switching to the <code>Developer</code> perspective, in the <code>Topology</code> menu.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_3_create_central_resource.png" alt="ACS Operator 53" width="800">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also do the same using the <code>Developer</code> perspective:</p>
</div>
<div class="paragraph">
<p>+
image::install/04_3_create_central_resource.png[ACS Operator 53, 800]</p>
</div>
<div class="paragraph">
<p>You can also do the same using the <code>Developer</code> perspective:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the <code>stackrock</code> project selected, <strong>+Add → Import YAML</strong></p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_11_create_central_resource.png" alt="ACS Operator 511" width="800">
</div>
</div>
</li>
<li>
<p>Paste the YAML content and click on the <code>Create</code> button:</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/04_22_create_central_resource.png" alt="ACS Operator 512" width="800">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="install_acs_central_oc_client"><a class="anchor" href="#install_acs_central_oc_client"></a>Deploying Central using the oc client (CLI)</h3>
<div class="paragraph">
<p>Log in to your OpenShift cluster and create a new <code>stackrox</code> namespace (using the web console or the cli as follows). We will install our components here.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project stackrox</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of the central custom resource. You can do this in two ways, via the web console or via the CLI.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: platform.stackrox.io/v1alpha1
kind: Central
metadata:
  name: stackrox-central-services
  namespace: stackrox
spec:
  central:
    exposure:
      loadBalancer:
        enabled: false
        port: 443
      nodePort:
        enabled: false
      route:
        enabled: true
    persistence:
      persistentVolumeClaim:
        claimName: stackrox-db
  egress:
    connectivityPolicy: Online
  scanner:
    analyzer:
      scaling:
        autoScaling: Enabled
        maxReplicas: 5
        minReplicas: 2
        replicas: 3
    scannerComponent: Enabled</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>central</code> custom resource using the template file provided in this repository.</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f stackrox-central-services.yaml -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>Monitor the installation using the watch option:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n stackrox -w</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_rhacs_login"><a class="anchor" href="#_rhacs_login"></a>RHACS login</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once the installation is complete, obtain and copy the generated admin password from the <code>central-htpasswd</code> secret.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Using the command line:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n stackrox get secret central-htpasswd -o go-template='{{index .data "password" | base64decode}}'</code></pre>
</div>
</div>
</li>
<li>
<p>Using the web console, <strong>Secrets</strong> view from the <code>Developer</code> perspective (search for <code>central-htpasswd</code> secret):</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/05_1_login_password.png" alt="ACS Operator 61" width="800">
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Extract the hostname of the generated route from the command line as follows or using the <code>Topology</code> view from the web console.</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get routes/central -n stackrox -o jsonpath='{.spec.host}'</code></pre>
</div>
</div>
</li>
<li>
<p>Login to <a href="https://&lt;route_hostname&gt" class="bare">https://&lt;route_hostname&gt</a>; using the <code>admin</code> username and the password extracted before.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/05_2_login.png" alt="ACS Operator 62" width="800">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="config_acs_securedcluster"><a class="anchor" href="#config_acs_securedcluster"></a>RHACS Secured Cluster Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To import a cluster into ACS, you need to generate a cluster init bundle containing TLS secrets for Sensor, Collectors, and Admission Controllers.</p>
</div>
<div class="sect2">
<h3 id="config_acs_securedcluster_init_bundle"><a class="anchor" href="#config_acs_securedcluster_init_bundle"></a>Generating an init bundle by using the RHACS portal</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate the cluster init bundle by accessing the <code>Integration</code> subsection in the <code>Platform Configuration</code> section</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/06_acs_integrations.png" alt="ACS Operator 7" width="800">
</div>
</div>
</li>
<li>
<p>Generate the bundle with a unique cluster name, in our case, <code>demo-cluster</code></p>
<div class="imageblock">
<div class="content">
<img src="_images/install/07_generate_cluster_init_bundle.png" alt="ACS Operator 8" width="800">
</div>
</div>
</li>
<li>
<p>Download the cluster init bundle secret.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/08_download_cluster_init_bundle_secret.png" alt="ACS Operator 9" width="800">
</div>
</div>
</li>
<li>
<p>Apply the cluster init bundle secret on the target secured cluster</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f ~/Downloads/demo-cluster-cluster-init-secrets.yaml -n stackrox</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can open the yaml file, copy the content and paste it to the web console using the <strong>+Add → Import YAML</strong> shortcut. As you are <code>cluster-admin</code> and all the object have the <code>namespace</code> key set you will get all the object created in their respective namespaces regrardless the project you choose in the web console (all projects or whatever).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="config_acs_securedcluster_install_scs"><a class="anchor" href="#config_acs_securedcluster_install_scs"></a>Installing secured cluster services</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workshop uses the same cluster as central and secured cluster. In a real time scenario there will be many different secured clusters. Please ensure to install the ACS Operator in all the secured cluster in order to manage the SecuredCluster CR.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>SecuredCluster</code> custom resource is quite simple. The following example shows the configuration for a <code>demo-cluster</code> target. Notice the <code>collector</code> configuration, with the collection method set to <code>EBPF</code>. The alternative collection approach would be <code>KernelModule</code>. The <code>TolerateTaints</code> lets the Collector daemonset be deployed also on nodes with special taints, like the ODF nodes.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: platform.stackrox.io/v1alpha1
kind: SecuredCluster
metadata:
  name: stackrox-secured-cluster-services
  namespace: stackrox
spec:
  admissionControl:
    listenOnCreates: true
    listenOnEvents: true
    listenOnUpdates: true
  clusterName: demo-cluster
  perNode:
    collector:
      collection: EBPF
      imageFlavor: Regular
    taintToleration: TolerateTaints</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Check the settings of the <a href="https://docs.openshift.com/acs/installing/install-ocp-operator.html#addmission-controller-settings_install-ocp-operator">SecuredCluster operator documentation</a> for more information.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the Secured Cluster custom Resource using (and optionally custumizing) the example provided in the repository.</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f stackrox-secured-cluster-services.yaml -n stackrox</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or using the web console, in the ACS opertator view, as follows:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Under the Provided APIs section, select Create instance on the Secured Cluster API</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/09_create_secured_cluster_resource.png" alt="ACS Operator 9" width="800">
</div>
</div>
</li>
<li>
<p>And then copy &amp; paste the yaml content</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/10_create_secured_cluster_resource_yaml.png" alt="ACS Operator 10" width="800">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Or as in the previous section, with the <strong>+Add → Import YAML</strong> path.</p>
</div>
</li>
<li>
<p>Monitor the installation using the watch option (or using the web console <code>Topology</code> view from the <code>Developer</code> perspective as mentioned before):</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n stackrox -w</code></pre>
</div>
</div>
</li>
<li>
<p>At the end of the installation, go to the central console and check the correct attachment of the secured cluster.</p>
<div class="imageblock">
<div class="content">
<img src="_images/install/11_verify_cluster_list.png" alt="ACS Operator 11" width="800">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="deploy_acs_manually"><a class="anchor" href="#deploy_acs_manually"></a>Deploying ACS manually</h3>
<div class="paragraph">
<p>We have seen how to deploy ACS using the web user interface but, sometimes it is necessary to automate the deployment using tools such ansible for instance.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how to manually, using the CLI, we can deploy ACS so we will be able to automate it with any tool.</p>
</div>
<div class="paragraph">
<p>First we need to create a namespace to deploy the ACS operator:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project rhacs-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>We need to create the operator group creating the following yaml file:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  apiVersion: operators.coreos.com/v1
  kind: OperatorGroup
  metadata:
    name: rhacs-operator
    namespace: rhacs-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply the file to create the operator group:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f acs-operator-group.yaml -n rhacs-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the subscription yaml file:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: rhacs-operator
  namespace: rhacs-operator
  labels:
    operators.coreos.com/rhacs-operator.rhacs-operator: ''
spec:
  channel: stable
  installPlanApproval: Automatic
  name: rhacs-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply the subscription file:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f subscription.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this moment the ACS operator will be installing. It will take sometime to install. Not much, just a few seconds.</p>
</div>
<div class="paragraph">
<p>Now we need to deploy central.  So the first thing is to create the namespace where Central will be deployed:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project stackrox</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of the central custom resource:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: platform.stackrox.io/v1alpha1
kind: Central
metadata:
  name: stackrox-central-services
  namespace: stackrox
spec:
  central:
    exposure:
      loadBalancer:
        enabled: false
        port: 443
      nodePort:
        enabled: false
      route:
        enabled: true
    persistence:
      persistentVolumeClaim:
        claimName: stackrox-db
  egress:
    connectivityPolicy: Online
  scanner:
    analyzer:
      scaling:
        autoScaling: Enabled
        maxReplicas: 5
        minReplicas: 2
        replicas: 3
    scannerComponent: Enabled</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the custom resource:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f stackrox-central-services.yaml -n stackrox</code></pre>
</div>
</div>
<div class="paragraph">
<p>Central will be deployed. You can check it:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n stackrox -w</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you will need to get the ACS admin password:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n stackrox get secret central-htpasswd -o jsonpath="{.data['password']}" | base64 -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>and the ACS Central console URL:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n stackrox get routes/central -o jsonpath='{.spec.host}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the ACS Central is deployed we will need to add clusters into ACS. To add the cluster where we have deployed Central to ACS we need to download the <a href="https://mirror.openshift.com/pub/rhacs/assets/4.0.2/bin/Linux/roxctl">roxctl</a> command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will need to download the version matching the ACS version you have deployed. You can also use a containerized version, but in this workshop we will use the command line tool.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We use the <em>roxctl</em> to create the init bundle:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">roxctl -e &lt;ACS CONSOLE URL&gt;:443 central init-bundles generate demo-cluster --insecure-skip-tls-verify --output-secrets /tmp/demo-cluster.yaml --password &lt;ACS ADMIN PASSWORD&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply the init bundle:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc -n stackrox apply -f /tmp/demo-cluster.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The secured cluster resource yaml file:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: platform.stackrox.io/v1alpha1
kind: SecuredCluster
metadata:
  name: acs-secured-cluster-services
  namespace: stackrox
spec:
  admissionControl:
    listenOnCreates: true
    listenOnEvents: true
    listenOnUpdates: true
  clusterName: demo-cluster
  perNode:
    collector:
      collection: EBPF
      imageFlavor: Regular
    taintToleration: TolerateTaints</code></pre>
</div>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"> oc -n stackrox apply -f secured-cluster.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that the cluster will have been included in ACS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy_demo_acs"><a class="anchor" href="#deploy_demo_acs"></a>Deploying Demo in RHACS - Mandatory</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Independent of which option to install you used, you need to deploy the ACS Demo into your cluster.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the repo with the demo:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ansible-galaxy collection install kubernetes.core
pip install kubernetes jmespath
git clone <a href="https://github.com/rh-mobb/rhacs-demo" class="bare">https://github.com/rh-mobb/rhacs-demo</a>
cd rhacs-demo</code></pre>
</div>
</div>
</li>
<li>
<p>Apply the ansible demo into the cluster:</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
you must be logged to the OpenShift cluster before you execute the playbook.
</td>
</tr>
</table>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ansible-playbook rhacs-demo.yaml -e stackrox_central_admin_password=[your_pass]<i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The same password you obtained in the step 1 of the <code>ACS login</code> section.</td>
</tr>
</table>
</div>
</li>
<li>
<p>After the Playbook execution (and if everything worked properly), the output will be the following:</p>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">TASK [ocp4_workload_stackrox_demo_apps : post_workload tasks complete] ********************************************************
ok: [localhost] =&gt; {
    "msg": "Post-Workload Tasks completed successfully."
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy_apps"><a class="anchor" href="#deploy_apps"></a>Deploying Apps - Optional</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you do not plan to follow the remaining sections (which are based on deploying the demo) and prefer to play and make your own findings, simply follow the steps below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new project:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project test</code></pre>
</div>
</div>
</li>
<li>
<p>Start some applications with critical vulnerabilities:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc run shell --labels=app=shellshock,team=test-team \
  --image=vulnerables/cve-2014-6271 -n test</code></pre>
</div>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc run samba --labels=app=rce \
  --image=vulnerables/cve-2017-7494 -n test</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to the RHACS portal to view the violations.</p>
<div class="imageblock">
<div class="content">
<img src="_images/violations/00-test-example.png" alt="ACS Operator 7" width="800">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="01-setup.html" class="query-params-link">Setup</a></span>
  <span class="next"><a href="03-overview-acs.html" class="query-params-link">RHACS Overview</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
